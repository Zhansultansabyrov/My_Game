<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∏—Ç–≤–∞ —Å –º–æ–Ω—Å—Ç—Ä–æ–º</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script>
        let config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            scene: [MenuScene, GameScene]
        };

        let game = new Phaser.Game(config);
        let playerType = "warrior";
        let monsterHP = 100;

        function MenuScene() {
            this.preload = function() {
                this.load.image('background', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω
                this.load.image('warrior', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –í–æ–∏–Ω
                this.load.image('mage', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –ú–∞–≥
                this.load.image('archer', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –õ—É—á–Ω–∏–∫
            };

            this.create = function() {
                this.add.image(100, 100, 'background').setScale(1.5);
                this.add.text(180, 50, '–í—ã–±–µ—Ä–∏ –≥–µ—Ä–æ—è:', { fontSize: '32px', fill: '#000' });

                let warriorBtn = this.add.image(40, 100, 'warrior').setScale(0.3).setInteractive();
                let mageBtn = this.add.image(100, 100, 'mage').setScale(0.3).setInteractive();
                let archerBtn = this.add.image(300, 100, 'archer').setScale(0.3).setInteractive();

                warriorBtn.on('pointerdown', () => { playerType = "warrior"; this.scene.start('GameScene'); });
                mageBtn.on('pointerdown', () => { playerType = "mage"; this.scene.start('GameScene'); });
                archerBtn.on('pointerdown', () => { playerType = "archer"; this.scene.start('GameScene'); });
            };
        }

        function GameScene() {
            this.key = 'GameScene';
            this.preload = function() {
                this.load.image('background', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –§–æ–Ω
                this.load.image('monster', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –ú–æ–Ω—Å—Ç—Ä
                this.load.image('attackButton', 'https://avatars.mds.yandex.net/i?id=f7ee800ce28ad28785d2e2efcab12666_l-5220579-images-thumbs&n=13'); // –ö–Ω–æ–ø–∫–∞ –∞—Ç–∞–∫–∏
            };

            this.create = function() {
                this.add.image(400, 300, 'background').setScale(1.5);
                this.add.image(400, 300, 'monster').setScale(0.5);
                let monsterText = this.add.text(250, 100, '–ó–¥–æ—Ä–æ–≤—å–µ –º–æ–Ω—Å—Ç—Ä–∞: 100', { fontSize: '28px', fill: '#000' });

                let attackButton = this.add.image(400, 500, 'attackButton').setScale(0.3).setInteractive();

                let attackEffects = {
                    "warrior": "‚öîÔ∏è –ú–µ—á!",
                    "mage": "üî• –û–≥–æ–Ω—å!",
                    "archer": "üèπ –°—Ç—Ä–µ–ª–∞!"
                };

                attackButton.on('pointerdown', function () {
                    if (monsterHP > 0) {
                        monsterHP -= 20;
                        monsterText.setText('–ó–¥–æ—Ä–æ–≤—å–µ –º–æ–Ω—Å—Ç—Ä–∞: ' + Math.max(monsterHP, 0));

                        let effectText = this.add.text(350, 400, attackEffects[playerType], { fontSize: '32px', fill: '#ff0' });
                        setTimeout(() => effectText.destroy(), 500);

                        if (monsterHP <= 0) {
                            monsterText.setText('–ú–æ–Ω—Å—Ç—Ä –ø–æ–±–µ–∂–¥–µ–Ω!');
                            let restartButton = this.add.text(350, 450, '–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ', { fontSize: '24px', fill: '#ff0' })
                                .setInteractive()
                                .on('pointerdown', () => location.reload());
                        }
                    }
                }, this);
            };
        }
    </script>
</body>
</html>
