<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ë–∏—Ç–≤–∞ —Å –º–æ–Ω—Å—Ç—Ä–æ–º</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script>
        let gameWidth = window.innerWidth;  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞
        let gameHeight = window.innerHeight; // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã—Å–æ—Ç—É —ç–∫—Ä–∞–Ω–∞

        let config = {
            type: Phaser.AUTO,
            width: gameWidth,
            height: gameHeight,
            scene: [MenuScene, GameScene]
        };

        let game = new Phaser.Game(config);
        let playerType = "warrior";
        let monsterHP = 100;

        function MenuScene() {
            this.preload = function() {
                this.load.image('background', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –§–æ–Ω (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π)
                this.load.image('warrior', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –í–æ–∏–Ω
                this.load.image('mage', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –ú–∞–≥
                this.load.image('archer', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –õ—É—á–Ω–∏–∫
            };

            this.create = function() {
                this.add.image(gameWidth / 2, gameHeight / 2, 'background').setScale(1.5);
                this.add.text(gameWidth / 2 - 80, 50, '–í—ã–±–µ—Ä–∏ –≥–µ—Ä–æ—è:', { fontSize: '24px', fill: '#000' });

                let warriorBtn = this.add.image(gameWidth / 4, gameHeight / 2, 'warrior').setScale(0.3).setInteractive();
                let mageBtn = this.add.image(gameWidth / 2, gameHeight / 2, 'mage').setScale(0.3).setInteractive();
                let archerBtn = this.add.image((gameWidth / 4) * 3, gameHeight / 2, 'archer').setScale(0.3).setInteractive();

                warriorBtn.on('pointerdown', () => { playerType = "warrior"; this.scene.start('GameScene'); });
                mageBtn.on('pointerdown', () => { playerType = "mage"; this.scene.start('GameScene'); });
                archerBtn.on('pointerdown', () => { playerType = "archer"; this.scene.start('GameScene'); });
            };
        }

        function GameScene() {
            this.key = 'GameScene';
            this.preload = function() {
                this.load.image('background', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –§–æ–Ω
                this.load.image('monster', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –ú–æ–Ω—Å—Ç—Ä
                this.load.image('attackButton', 'https://s1.bwallpapers.com/wallpapers/2014/01/22/black-wallpaper_044746654.jpg'); // –ö–Ω–æ–ø–∫–∞ –∞—Ç–∞–∫–∏
            };

            this.create = function() {
                this.add.image(gameWidth / 2, gameHeight / 2, 'background').setScale(1.5);
                this.add.image(gameWidth / 2, gameHeight / 3, 'monster').setScale(0.5);
                let monsterText = this.add.text(gameWidth / 2 - 100, 50, '–ó–¥–æ—Ä–æ–≤—å–µ –º–æ–Ω—Å—Ç—Ä–∞: 100', { fontSize: '24px', fill: '#000' });

                let attackButton = this.add.image(gameWidth / 2, gameHeight - 100, 'attackButton').setScale(0.5).setInteractive();

                let attackEffects = {
                    "warrior": "‚öîÔ∏è –ú–µ—á!",
                    "mage": "üî• –û–≥–æ–Ω—å!",
                    "archer": "üèπ –°—Ç—Ä–µ–ª–∞!"
                };

                attackButton.on('pointerdown', function () {
                    if (monsterHP > 0) {
                        monsterHP -= 20;
                        monsterText.setText('–ó–¥–æ—Ä–æ–≤—å–µ –º–æ–Ω—Å—Ç—Ä–∞: ' + Math.max(monsterHP, 0));

                        let effectText = this.add.text(gameWidth / 2 - 40, gameHeight / 2, attackEffects[playerType], { fontSize: '32px', fill: '#ff0' });
                        setTimeout(() => effectText.destroy(), 500);

                        if (monsterHP <= 0) {
                            monsterText.setText('–ú–æ–Ω—Å—Ç—Ä –ø–æ–±–µ–∂–¥–µ–Ω!');
                            let restartButton = this.add.text(gameWidth / 2 - 60, gameHeight / 2 + 50, '–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ', { fontSize: '24px', fill: '#ff0' })
                                .setInteractive()
                                .on('pointerdown', () => location.reload());
                        }
                    }
                }, this);
            };
        }
    </script>
</body>
</html>
